<ui:composition
	xmlns="https://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="templates/imsTemplate.xhtml">
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>

		<!-- Tab title defined -->
		<ui:define name="title">
			Purchase Order - IMS
		</ui:define>

		<!-- Title appearing in top left of the page -->
		<ui:define name="pagetitle">
			Purchase Order
		</ui:define>

		<!-- Breadcrumbs appearing in top right of the page -->
		<ui:define name="breadcrumbs">
			<a href="imsIndex.xhtml">Home</a> > Purchase Orders
		</ui:define>
		
		<ui:define name="backFunction">
		 <h:commandLink action="#{pos.reset()}" value="" class="hovering">
           			<h:graphicImage class="glass_back" value="img/back.png"/>
         </h:commandLink>
		</ui:define>

		<!-- Operations buttons - add/edit/delete -->
		<ui:define name="addbtn">
			<a href="addPurchaseOrder.xhtml">
			Add <img src="img/add.png" class="icon opsicon"/>
			</a>
		</ui:define>

		<ui:define name="editbtn">
			<a href="imsIndex.xhtml">
			Edit <img src="img/edit.png" class="icon opsicon"/>
			</a>
		</ui:define>

		<ui:define name="deletebtn">
			<a href="imsIndex.xhtml">
			Delete <img src="img/bin.png" class="icon opsicon"/>
			</a>
		</ui:define>

				<ui:define name="searchButtonAction">
		            	<h:commandLink class="hovering" action="#{search.searchSuppliers('ims')}"> 
              		<h:graphicImage class="glass_back" value="img/glass.png"/>
           		</h:commandLink>
        </ui:define>

		<!-- Main content of  -->
		<ui:define name="maincontent">

			<!-- Grid for suppliers -->
		  	<div class="row table">
		  		<div class="col-sm-2 heading supDetails">
		  			ID
		  		</div>
		   		<div class="col-sm-6 heading supDetails">
	     			Supplier
	    		</div>
	    		<div class="col-sm-2 heading supDetails listCenter">
		      		Items
		   		</div>
		   		<div class="col-sm-2 heading supDetails listCenter">
		      		Total
		   		</div>
		  	</div>

		  	<!-- Generation of suppliers into grid -->
		  	<ui:repeat var="po" value="#{pos.dataModel}">
		  		<div class="row table listItem">
		  			<div class="col-sm-2 supDetails">
						<h:form>
							<h:commandLink action="#{pos.view(po.id)}" value="#{po.id}"/>
						</h:form>
					</div>
					<div class="col-sm-6 supDetails">
						<h:form>
							<h:commandLink action="#{pos.view(po.id)}" value="#{po.supplier.company}"/>
						</h:form>
					</div>
			    	<div class="col-sm-2 supDetails listCenter">
			    		<h:form>
			      			<h:commandLink action="#{pos.view(po.id)}" value="#{pos.findLines(po)}"/>
			      		</h:form>
			    	</div>
			    	<div class="col-sm-2 supDetails listCenter">
			      		<h:outputText value="#{pos.calculateTotal(po)}"/>
			   		</div>
		   		</div>
		   	</ui:repeat>


		   	<h:form>   		
		   			<div class="row">
	   				<div class="col-sm-4 col-xs-4 nbbuttonp pageing page">
	   					<h:commandLink action="#{pos.previous()}" value="Previous" rendered="#{pos.pagination.hasPreviousPage}" />
	   				</div>
		   			<div class="col-sm-4 col-xs-4 nbbuttonp pageing page">
		   				<h:outputText value="Showing POs #{pos.pagination.pageFirstItem + 1} to #{pos.pagination.getPageLastItem() + 1} of #{pos.pagination.itemsCount}" />
		   			</div>
		   			<div class="col-sm-4 col-xs-4 nbbuttonp pageing page">
		   				<h:commandLink action="#{pos.next}" rendered="#{pos.pagination.hasNextPage}" value="Next" />
		   			</div>
		   		</div>
		   	</h:form>

		</ui:define>

<!-- Add pagination here -->

</ui:composition>